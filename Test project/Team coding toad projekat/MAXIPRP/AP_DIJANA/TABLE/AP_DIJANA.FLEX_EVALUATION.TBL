CREATE TABLE AP_DIJANA.FLEX_EVALUATION
(
  USER_ID           NUMBER                      NOT NULL,
  SF_POS            VARCHAR2(3 BYTE)            NOT NULL,
  RJ                VARCHAR2(3 BYTE)            NOT NULL,
  FLEX_EVALUATION   NUMBER,
  FLEX_COMMENT      VARCHAR2(50 BYTE),
  STORE_EVALUATION  NUMBER,
  STORE_COMMENT     VARCHAR2(50 BYTE),
  WHO_ADDED         NVARCHAR2(50),
  WHEN_ADDED        DATE,
  WHO_CHANGED       NVARCHAR2(50),
  WHEN_CHANGED      DATE,
  EVALUATION_ID     NUMBER
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE;


CREATE UNIQUE INDEX AP_DIJANA.PK_EVALUATION ON AP_DIJANA.FLEX_EVALUATION
(USER_ID, SF_POS, RJ, EVALUATION_ID)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );

ALTER TABLE AP_DIJANA.FLEX_EVALUATION ADD (
  CONSTRAINT PK_EVALUATION
  PRIMARY KEY
  (USER_ID, SF_POS, RJ, EVALUATION_ID)
  USING INDEX AP_DIJANA.PK_EVALUATION
  ENABLE VALIDATE);


ALTER TABLE AP_DIJANA.FLEX_EVALUATION ADD (
  CONSTRAINT FK_STORE_EVALUATION 
  FOREIGN KEY (SF_POS, RJ) 
  REFERENCES AP_DIJANA.FLEX_STORE (SF_POS, RJ)
  ENABLE VALIDATE
,  CONSTRAINT FK_USER_EVALUATION 
  FOREIGN KEY (USER_ID) 
  REFERENCES AP_DIJANA.FLEX_USER (USER_ID)
  ENABLE VALIDATE);
